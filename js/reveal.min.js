/*!
 * reveal.js 2.1 r26
 * http://lab.hakim.se/reveal-js
 * MIT licensed
 * 
 * Copyright (C) 2011-2012 Hakim El Hattab, http://hakim.se
 */
(function(a){Drupal.behaviors.reveal_core={attach:function(a,b){Reveal=function(){function p(a){if(!k&&!j){document.body.setAttribute("class","no-transforms");return}v(c,a);i.theme=document.querySelector("#theme");i.wrapper=document.querySelector(".reveal");i.progress=document.querySelector(".reveal .progress");i.progressbar=document.querySelector(".reveal .progress span");if(c.controls){i.controls=document.querySelector(".reveal .controls");i.controlsLeft=document.querySelector(".reveal .controls .left");i.controlsRight=document.querySelector(".reveal .controls .right");i.controlsUp=document.querySelector(".reveal .controls .up");i.controlsDown=document.querySelector(".reveal .controls .down")}q();if(navigator.userAgent.match(/(iphone|ipod|android)/i)){document.documentElement.style.overflow="scroll";document.body.style.height="120%";window.addEventListener("load",y,false);window.addEventListener("orientationchange",y,false)}}function q(){function g(){head.js.apply(null,b);r()}var a=[],b=[];for(var d=0,e=c.dependencies.length;d<e;d++){var f=c.dependencies[d];if(!f.condition||f.condition()){if(f.async){b.push(f.src)}else{a.push(f.src)}if(typeof f.callback==="function"){head.ready(f.src.match(/([\w\d_-]*)\.?[^\\\/]*$/i)[0],f.callback)}}}if(a.length){head.ready(g);head.js.apply(null,a)}else{g()}}function r(){t();s();O();T()}function s(){if(j===false){c.transition="linear"}if(c.controls&&i.controls){i.controls.style.display="block"}if(c.progress&&i.progress){i.progress.style.display="block"}if(c.theme&&i.theme){var a=i.theme.getAttribute("href");var b=/[^/]*?(?=\.css)/;var d=a.match(b)[0];if(c.theme!==d){a=a.replace(b,c.theme);i.theme.setAttribute("href",a)}}if(c.transition!=="default"){i.wrapper.classList.add(c.transition)}if(c.mouseWheel){document.addEventListener("DOMMouseScroll",D,false);document.addEventListener("mousewheel",D,false)}if(c.rollingLinks){F()}}function t(){document.addEventListener("touchstart",A,false);document.addEventListener("touchmove",B,false);document.addEventListener("touchend",C,false);window.addEventListener("hashchange",E,false);if(c.keyboard){document.addEventListener("keydown",z,false)}if(c.controls&&i.controls){i.controlsLeft.addEventListener("click",x(V),false);i.controlsRight.addEventListener("click",x(W),false);i.controlsUp.addEventListener("click",x(X),false);i.controlsDown.addEventListener("click",x(Y),false)}}function u(){document.removeEventListener("keydown",z,false);document.removeEventListener("touchstart",A,false);document.removeEventListener("touchmove",B,false);document.removeEventListener("touchend",C,false);window.removeEventListener("hashchange",E,false);if(c.controls&&i.controls){i.controlsLeft.removeEventListener("click",x(V),false);i.controlsRight.removeEventListener("click",x(W),false);i.controlsUp.removeEventListener("click",x(X),false);i.controlsDown.removeEventListener("click",x(Y),false)}}function v(a,b){for(var c in b){a[c]=b[c]}}function w(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function x(a){return function(b){b.preventDefault();a.call()}}function y(){setTimeout(function(){window.scrollTo(0,1)},0)}function z(a){if(document.querySelector(":focus")!==null||a.shiftKey||a.altKey||a.ctrlKey||a.metaKey)return;var b=false;switch(a.keyCode){case 80:case 33:Z();b=true;break;case 78:case 34:$();b=true;break;case 72:case 37:V();b=true;break;case 76:case 39:W();b=true;break;case 75:case 38:X();b=true;break;case 74:case 40:Y();b=true;break;case 36:U(0);b=true;break;case 35:U(Number.MAX_VALUE);b=true;break;case 32:I()?H():$();b=true;break;case 13:if(I()){H();b=true}break}if(b){a.preventDefault()}else if(a.keyCode===27&&j){_();a.preventDefault()}T()}function A(a){o.startX=a.touches[0].clientX;o.startY=a.touches[0].clientY;o.startCount=a.touches.length;if(a.touches.length===2){o.startSpan=w({x:a.touches[1].clientX,y:a.touches[1].clientY},{x:o.startX,y:o.startY})}}function B(a){if(!o.handled){var b=a.touches[0].clientX;var c=a.touches[0].clientY;if(a.touches.length===2&&o.startCount===2){var d=w({x:a.touches[1].clientX,y:a.touches[1].clientY},{x:o.startX,y:o.startY});if(Math.abs(o.startSpan-d)>o.threshold){o.handled=true;if(d<o.startSpan){G()}else{H()}}}else if(a.touches.length===1){var e=b-o.startX,f=c-o.startY;if(e>o.threshold&&Math.abs(e)>Math.abs(f)){o.handled=true;V()}else if(e<-o.threshold&&Math.abs(e)>Math.abs(f)){o.handled=true;W()}else if(f>o.threshold){o.handled=true;X()}else if(f<-o.threshold){o.handled=true;Y()}}a.preventDefault()}}function C(a){o.handled=false}function D(a){clearTimeout(l);l=setTimeout(function(){var b=a.detail||-a.wheelDelta;if(b>0){$()}else{Z()}},100)}function E(a){O()}function F(){if(j&&!("msPerspective"in document.body.style)){var a=document.querySelectorAll(".reveal .slides section a:not(.image)");for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d.textContent&&!d.querySelector("img")&&(!d.className||!d.classList.contains(d,"roll"))){d.classList.add("roll");d.innerHTML='<span data-title="'+d.text+'">'+d.innerHTML+"</span>"}}}}function G(){if(c.overview){i.wrapper.classList.add("overview");var b=document.querySelectorAll(a);for(var f=0,g=b.length;f<g;f++){var h=b[f],j="translateZ(-2500px) translate("+(f-d)*105+"%, 0%)";h.setAttribute("data-index-h",f);h.style.display="block";h.style.WebkitTransform=j;h.style.MozTransform=j;h.style.msTransform=j;h.style.OTransform=j;h.style.transform=j;if(!h.classList.contains("stack")){h.addEventListener("click",J,true)}var k=h.querySelectorAll("section");for(var l=0,m=k.length;l<m;l++){var n=k[l],o="translate(0%, "+(l-(f===d?e:0))*105+"%)";n.setAttribute("data-index-h",f);n.setAttribute("data-index-v",l);n.style.display="block";n.style.WebkitTransform=o;n.style.MozTransform=o;n.style.msTransform=o;n.style.OTransform=o;n.style.transform=o;n.addEventListener("click",J,true)}}}}function H(){if(c.overview){i.wrapper.classList.remove("overview");var a=Array.prototype.slice.call(document.querySelectorAll(".reveal .slides section"));for(var b=0,d=a.length;b<d;b++){var e=a[b];e.style.WebkitTransform="";e.style.MozTransform="";e.style.msTransform="";e.style.OTransform="";e.style.transform="";e.removeEventListener("click",J)}L()}}function I(){return i.wrapper.classList.contains("overview")}function J(a){if(I()){a.preventDefault();H();d=this.getAttribute("data-index-h");e=this.getAttribute("data-index-v");L()}}function K(a,b){var d=Array.prototype.slice.call(document.querySelectorAll(a)),e=d.length;if(e){if(c.loop){b%=e;if(b<0){b=e+b}}b=Math.max(Math.min(b,e-1),0);for(var f=0;f<e;f++){var g=d[f];if(I()===false){var i=Math.abs((b-f)%(e-3))||0;g.style.display=i>3?"none":"block"}d[f].classList.remove("past");d[f].classList.remove("present");d[f].classList.remove("future");if(f<b){d[f].classList.add("past")}else if(f>b){d[f].classList.add("future")}if(g.querySelector("section")){d[f].classList.add("stack")}}d[b].classList.add("present");var j=d[b].getAttribute("data-state");if(j){h=h.concat(j.split(" "))}}else{b=0}return b}function L(j,k){f=g;var l=h.concat();h.length=0;var m=d,o=e;d=K(a,j===undefined?d:j);e=K(b,k===undefined?e:k);a:for(var p=0,q=h.length;p<q;p++){for(var r=0;r<l.length;r++){if(l[r]===h[p]){l.splice(r,1);continue a}}document.documentElement.classList.add(h[p]);Q(h[p])}while(l.length){document.documentElement.classList.remove(l.pop())}if(c.progress&&i.progress){i.progressbar.style.width=d/(document.querySelectorAll(a).length-1)*window.innerWidth+"px"}if(I()){G()}M();clearTimeout(n);n=setTimeout(P,1500);var s=document.querySelectorAll(a);var t=s[d],u=t.querySelectorAll("section");g=u[e]||t;if(d!==m||e!==o){Q("slidechanged",{indexh:d,indexv:e,previousSlide:f,currentSlide:g})}else{f=null}if(f){f.classList.remove("present")}}function M(){if(!c.controls||!i.controls){return}var a=N();[i.controlsLeft,i.controlsRight,i.controlsUp,i.controlsDown].forEach(function(a){a.classList.remove("enabled")});if(a.left)i.controlsLeft.classList.add("enabled");if(a.right)i.controlsRight.classList.add("enabled");if(a.up)i.controlsUp.classList.add("enabled");if(a.down)i.controlsDown.classList.add("enabled")}function N(){var c=document.querySelectorAll(a);var f=document.querySelectorAll(b);return{left:d>0,right:d<c.length-1,up:e>0,down:e<f.length-1}}function O(){var a=window.location.hash;var b=a.slice(2).split("/"),c=a.replace(/#|\//gi,"");if(isNaN(parseInt(b[0]))&&c.length){var f=document.querySelector("#"+c);if(f){var g=Reveal.getIndices(f);U(g.h,g.v)}else{U(d,e)}}else{var h=parseInt(b[0])||0,i=parseInt(b[1])||0;U(h,i)}}function P(){if(c.history){var a="/";if(d>0||e>0)a+=d;if(e>0)a+="/"+e;window.location.hash=a}}function Q(a,b){var c=document.createEvent("HTMLEvents",1,2);c.initEvent(a,true,true);v(c,b);i.wrapper.dispatchEvent(c)}function R(){if(document.querySelector(b+".present")){var c=document.querySelectorAll(b+".present .fragment:not(.visible)");if(c.length){c[0].classList.add("visible");Q("fragmentshown",{fragment:c[0]});return true}}else{var d=document.querySelectorAll(a+".present .fragment:not(.visible)");if(d.length){d[0].classList.add("visible");Q("fragmentshown",{fragment:d[0]});return true}}return false}function S(){if(document.querySelector(b+".present")){var c=document.querySelectorAll(b+".present .fragment.visible");if(c.length){c[c.length-1].classList.remove("visible");Q("fragmenthidden",{fragment:c[c.length-1]});return true}}else{var d=document.querySelectorAll(a+".present .fragment.visible");if(d.length){d[d.length-1].classList.remove("visible");Q("fragmenthidden",{fragment:d[d.length-1]});return true}}return false}function T(){clearTimeout(m);if(c.autoSlide){m=setTimeout($,c.autoSlide)}}function U(a,b){L(a,b)}function V(){if(I()||S()===false){L(d-1,0)}}function W(){if(I()||R()===false){L(d+1,0)}}function X(){if(I()||S()===false){L(d,e-1)}}function Y(){if(I()||R()===false){L(d,e+1)}}function Z(){if(S()===false){if(N().up){X()}else{var a=document.querySelector(".reveal .slides>section.past:nth-child("+d+")");if(a){e=a.querySelectorAll("section").length+1||0;d--;L()}}}}function $(){if(R()===false){N().down?Y():W()}T()}function _(){if(I()){H()}else{G()}}"use strict";var a=".reveal .slides>section",b=".reveal .slides>section.present>section",c={controls:true,progress:true,history:false,keyboard:true,overview:true,loop:false,autoSlide:0,mouseWheel:true,rollingLinks:true,theme:"default",transition:"default",dependencies:[]},d=0,e=0,f,g,h=[],i={},j="WebkitPerspective"in document.body.style||"MozPerspective"in document.body.style||"msPerspective"in document.body.style||"OPerspective"in document.body.style||"perspective"in document.body.style,k="WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"msTransform"in document.body.style||"OTransform"in document.body.style||"transform"in document.body.style,l=0,m=0,n=0,o={startX:0,startY:0,startSpan:0,startCount:0,handled:false,threshold:40};return{initialize:p,navigateTo:U,navigateLeft:V,navigateRight:W,navigateUp:X,navigateDown:Y,navigatePrev:Z,navigateNext:$,toggleOverview:_,addEventListeners:t,removeEventListeners:u,getIndices:function(b){var c=d,f=e;if(b){var g=!!b.parentNode.nodeName.match(/section/gi);var h=g?b.parentNode:b;var i=Array.prototype.slice.call(document.querySelectorAll(a));c=Math.max(i.indexOf(h),0);if(g){f=Math.max(Array.prototype.slice.call(b.parentNode.children).indexOf(b),0)}}return{h:c,v:f}},getPreviousSlide:function(){return f},getCurrentSlide:function(){return g},getQueryHash:function(){var a={};location.search.replace(/[A-Z0-9]+?=(\w*)/gi,function(b){a[b.split("=").shift()]=b.split("=").pop()});return a},addEventListener:function(a,b,c){if("addEventListener"in window){(i.wrapper||document.querySelector(".reveal")).addEventListener(a,b,c)}},removeEventListener:function(a,b,c){if("addEventListener"in window){(i.wrapper||document.querySelector(".reveal")).removeEventListener(a,b,c)}}}}()}}})(jQuery)